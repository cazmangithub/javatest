# ==============================================
# ğŸš€ Azure DevOps Pipeline - Proyecto INTERESTELAR
# ==============================================
# Ejecuta 3 jobs en paralelo (Build, Test, Deploy)
# Totalmente compatible con Linux (Ubuntu)
# ==============================================

trigger:
- main

# Variables globales
variables:
  agentPoolName: 'MySelfHostedPool'  # Nombre del pool (o usa ubuntu-latest)
  agentProject: 'INTERESTELAR'
  myToken: '$(myToken)'              # Variable secreta
  myUser: 'sebatianuribe111'
  myPassword: '$(myPassword)'        # Variable secreta

# ==============================================
# ğŸ§© Jobs en paralelo
# ==============================================
jobs:
- job: BuildProject
  displayName: "ğŸ—ï¸ Compilar proyecto INTERESTELAR"
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - script: |
      echo "Iniciando compilaciÃ³n en agente: $(Agent.Name)"
      echo "ğŸ“¦ Descargando dependencias..."
      sleep 3
      echo "ğŸ› ï¸ Compilando cÃ³digo fuente..."
      sleep 3
      echo "âœ… CompilaciÃ³n completada exitosamente."
    displayName: "CompilaciÃ³n del cÃ³digo"

- job: RunTests
  displayName: "ğŸ§ª Ejecutar pruebas automÃ¡ticas"
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - script: |
      echo "Ejecutando pruebas en agente: $(Agent.Name)"
      echo "Preparando entorno de pruebas..."
      sleep 2
      echo "Corriendo pruebas unitarias..."
      sleep 3
      echo "âœ… Todas las pruebas pasaron correctamente."
    displayName: "EjecuciÃ³n de pruebas"

- job: DeployApp
  displayName: "ğŸš€ Desplegar aplicaciÃ³n INTERESTELAR"
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - script: |
      echo "Desplegando aplicaciÃ³n en agente: $(Agent.Name)"
      echo "ğŸ“‚ Empaquetando artefactos..."
      sleep 2
      echo "ğŸŒ Subiendo a servidor de despliegue simulado..."
      sleep 3
      echo "âœ… Despliegue completado correctamente."
    displayName: "Despliegue de la aplicaciÃ³n"
